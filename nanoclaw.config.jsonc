{
  // ═══════════════════════════════════════════════════════════════════
  //  NanoClaw Configuration
  // ═══════════════════════════════════════════════════════════════════
  //
  //  This file configures how NanoClaw runs your Claude agents.
  //  It uses JSONC format: JSON with comments and trailing commas.
  //
  //  SECRETS: API keys and tokens belong in .env, NOT here.
  //  This file can be committed to git safely.
  //
  //  ENV VARS: Use ${VAR} or ${VAR:-default} in any string value.
  //  Example: "${HOME}/projects" expands to "/Users/you/projects"
  //
  //  EDITING: Uncomment sections as you enable features.
  //  Fields not in the current schema are rejected (catches typos).
  // ═══════════════════════════════════════════════════════════════════

  // ─── Execution Mode ───────────────────────────────────────────────
  //
  // How agents execute. This is the most important setting.
  //
  //   "container" (default)
  //     Agents run in isolated Linux VMs via Apple Container.
  //     + Safe: agents can only see mounted directories
  //     + Bash commands run inside the container, not on your Mac
  //     - Cannot access host dev tools, MCP servers, or native apps
  //
  //   "host"
  //     Agents run directly on macOS as subprocesses.
  //     + Full access to dev tools (git, kubectl, docker, etc.)
  //     + Can use host MCP servers and native apps
  //     + Inherits global MCP servers from ~/.claude/settings.json
  //     - Agent has real macOS access -- requires trust
  //     - Sandbox settings (below) provide safety boundaries
  //
  "executionMode": "host",  //"container"

  // ─── MCP Servers ──────────────────────────────────────────────────
  //
  // Model Context Protocol servers extend agent capabilities.
  // Configured here so NanoClaw can filter by execution mode.
  //
  // Each server needs:
  //   - A unique name (the key)
  //   - Connection config (command+args for stdio, or url for http/sse)
  //   - Optional "modes" array to restrict to specific execution modes
  //
  // If "modes" is omitted, the server is available in both modes.
  //
  // Environment variables in args and env are expanded at startup:
  //   "${GITHUB_TOKEN}" -> value of GITHUB_TOKEN from .env
  //   "${HOME}/projects" -> /Users/you/projects
  //   "${API_KEY:-sk-placeholder}" -> API_KEY value or "sk-placeholder"
  //
  // UNCOMMENT when ready (requires Phase 6):
  //
  // "mcpServers": {
  //
  //   // ── stdio server (local process) ──
  //   "github": {
  //     "command": "npx",
  //     "args": ["-y", "@modelcontextprotocol/server-github"],
  //     "env": {
  //       "GITHUB_TOKEN": "${GITHUB_TOKEN}"
  //     },
  //     "modes": ["host"]
  //   },
  //
  //   // ── stdio server with path expansion ──
  //   "filesystem": {
  //     "command": "npx",
  //     "args": ["-y", "@modelcontextprotocol/server-filesystem", "${HOME}/projects"],
  //     "modes": ["host", "container"]
  //   },
  //
  //   // ── HTTP/SSE remote server ──
  //   "remote-api": {
  //     "type": "sse",
  //     "url": "https://api.example.com/mcp/sse",
  //     "headers": {
  //       "Authorization": "Bearer ${API_TOKEN}"
  //     },
  //     "modes": ["host"]
  //   }
  //
  // },

  // ─── Host Mode Security ───────────────────────────────────────────
  //
  // When executionMode is "host", these settings control what NON-MAIN
  // group agents can do. The main group is always exempt (unsandboxed,
  // full tool access, bypassPermissions).
  //
  // Container mode ignores these entirely (containers have their own
  // isolation via Linux VMs).
  //
  "hostSecurity": {

    // ── Sandbox ──
    // macOS Seatbelt sandbox restricts Bash tool filesystem/network access
    // for non-main groups. Powered by the Claude Agent SDK's sandbox option.
    //
    //   true  (default) - Bash commands run in Seatbelt sandbox
    //   false           - No sandbox, full macOS access (use with caution)
    //
    // The sandbox only affects the Bash tool. Read/Write/Edit/Glob/Grep
    // are controlled by the SDK's permission mode (non-main groups use
    // 'default' mode, which prompts before destructive operations).
    //
    // To disable sandbox for a specific group, use per-group overrides
    // in registered_groups.json (Phase 8).
    //
    "sandbox": true

    // ── Tool Allowlist ──
    // Positive allowlist of tools available to non-main group agents.
    // Maps directly to the SDK's `tools` query option (restricts availability).
    // NOT the same as the SDK's `allowedTools` (which only controls auto-approval).
    //
    // When omitted or commented out: full Claude Code tool set (no restriction).
    // When present: ONLY these tools are available to the agent.
    //
    // NanoClaw MCP tools (mcp__nanoclaw__*) are ALWAYS injected regardless
    // of this setting -- they're needed for IPC communication.
    //
    // WARNING: An empty array [] is rejected by config validation (min 1).
    // The minimum useful set is ["Read", "Grep"].
    //
    // Available tools:
    //   "Bash"       - Execute shell commands (sandboxed if sandbox: true)
    //   "Read"       - Read file contents
    //   "Write"      - Create/overwrite files
    //   "Edit"       - Edit existing files (find & replace)
    //   "Glob"       - Find files by pattern
    //   "Grep"       - Search file contents
    //   "WebSearch"  - Search the web
    //   "WebFetch"   - Fetch URL content
    //
    // UNCOMMENT to restrict tools (default: all tools available):
    // "tools": [
    //   "Bash", "Read", "Write", "Edit", "Glob", "Grep",
    //   "WebSearch", "WebFetch"
    // ]

  },

  // ─── Per-Group Overrides ──────────────────────────────────────────
  //
  // Individual groups can override the global executionMode.
  // Configured in the database (registered_groups), not here.
  // Groups without an override inherit the global setting above.
  //
  // See Phase 8 for details. No config fields needed here --
  // per-group overrides use the existing group registration system.

  // ─── Path Environment Variables (Host Mode) ────────────────────
  //
  // When executionMode is "host", the host runner sets these env vars
  // on each agent-runner subprocess. You do NOT set these manually.
  //
  // These are documented here for reference and troubleshooting:
  //
  //   NANOCLAW_GROUP_DIR   - Agent working directory (per-group files)
  //   NANOCLAW_GLOBAL_DIR  - Shared global memory directory
  //   NANOCLAW_IPC_DIR     - IPC file exchange directory
  //   NANOCLAW_MODE        - "container" or "host" (affects settings sources)
  //   CLAUDE_CONFIG_DIR    - Claude session storage (SDK variable)
  //
  // In container mode, these are unset and defaults apply (/workspace/*).
  // In host mode, the runner resolves them to absolute macOS paths.
  // If a path doesn't exist, the agent-runner creates it automatically.

}
